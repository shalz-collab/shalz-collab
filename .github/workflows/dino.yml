name: Generate Dino

on:
  schedule:
    - cron: "0 */12 * * *"
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest

    permissions:
      contents: write

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Create output folder
        run: mkdir -p output

      - name: Generate Animated Dino SVG
        run: |
          cat > output/github-contribution-grid-dino.svg << 'EOF'
          <svg xmlns="http://www.w3.org/2000/svg" width="900" height="200">
            <rect width="900" height="200" fill="#0d1117"/>

            <!-- Ground -->
            <rect y="150" width="900" height="10" fill="#5c5c5c"/>

            <!-- Cactus -->
            <rect x="600" y="110" width="20" height="40" fill="#4CAF50">
              <animate attributeName="x" from="900" to="-30" dur="3s" repeatCount="indefinite"/>
            </rect>

            <!-- Dino -->
            <g>
              <rect id="body" x="80" y="110" width="40" height="40" fill="#ffffff"/>
              <rect id="leg1" x="80" y="150" width="10" height="15" fill="#ffffff">
                <animate attributeName="y" values="150;145;150" dur="0.3s" repeatCount="indefinite"/>
              </rect>
              <rect id="leg2" x="110" y="150" width="10" height="15" fill="#ffffff">
                <animate attributeName="y" values="145;150;145" dur="0.3s" repeatCount="indefinite"/>
              </rect>

              <!-- Dino Jumping Animation -->
              <animateTransform attributeName="transform"
                                type="translate"
                                values="0 0; 0 -40; 0 0"
                                begin="1s"
                                dur="0.6s"
                                repeatCount="indefinite"/>
            </g>
          </svg>
          EOF

      - name: Commit and Push SVG
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git add output/github-contribution-grid-dino.svg
          git commit -m "Update Dino Animation" || echo "No changes"
          git push
